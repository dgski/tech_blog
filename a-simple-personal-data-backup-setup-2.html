<!DOCTYPE html><html lang="en-us" data-theme="light"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>A Simple Personal Data Backup Setup - David Gorski&#x27;s Tech Blog</title><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://tech.davidgorski.ca/a-simple-personal-data-backup-setup-2.html"><link rel="alternate" type="application/atom+xml" href="https://tech.davidgorski.ca/feed.xml"><link rel="alternate" type="application/json" href="https://tech.davidgorski.ca/feed.json"><meta property="og:title" content="A Simple Personal Data Backup Setup"><meta property="og:site_name" content="David Gorski's Tech Blog"><meta property="og:description" content=""><meta property="og:url" content="https://tech.davidgorski.ca/a-simple-personal-data-backup-setup-2.html"><meta property="og:type" content="article"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Merriweather&display=swap" rel="stylesheet"><link rel="stylesheet" href="https://unpkg.com/@picocss/pico@latest/css/pico.min.css"><link rel="stylesheet" href="https://tech.davidgorski.ca/assets/css/style.css?v=0a84ec904691ac8314428f82627e777a"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://tech.davidgorski.ca/a-simple-personal-data-backup-setup-2.html"},"headline":"A Simple Personal Data Backup Setup","datePublished":"2021-03-13T14:29","dateModified":"2023-07-29T14:29","description":"","author":{"@type":"Person","name":"David Gorski","url":"https://tech.davidgorski.ca/authors/david-gorski/"},"publisher":{"@type":"Organization","name":"David Gorski"}}</script><script async defer="defer" data-website-id="f50301b5-5202-4a86-9509-d0a3ed6ed290" src="https://analytics.xantasoft.com/umami.js"></script></head><body><nav class="container-fluid"><ul><li><strong><a id="logo" href="https://tech.davidgorski.ca/">David Gorski&#x27;s Tech Blog</a></strong></li></ul><ul><li><a href="https://davidgorski.ca">About</a></li></ul></nav><main class="container"><div><header><hgroup><h1>A Simple Personal Data Backup Setup</h1><h3><time datetime="2021-03-13T14:29">Mar 13th 2021 </time>By <a href="https://davidgorski.ca" rel="author" title="David Gorski">David Gorski</a></h3></hgroup></header><div id="post-entry"><p>Until recently, my only computer was a 2013 MacBook Air. I backed it up using the included Time Machine system and an external spinning disk hard drive. With the nature of it being a laptop, I didn’t have the external drive plugged in all the time, and so I set a calendar reminder to do a weekly backup because I knew I wouldn’t do it daily. It’s embarrassing to admit that even as a ‘tech professional’, there were plenty of weeks that I skipped backing up my content. I was used to the computer working all the time, I was busy and I always had some excuse to ignore the reminders. MacOS Notifications would beg me to do something:</p><pre><code>It has been 3 weeks since you backed up your computer! You&#39;re asking for data loss chump!
</code></pre><p>It’s pretty obvious that in order for it to function properly, you need an automatic backup system. Otherwise, human complacency and laziness take over. Your data needs to be backed up without any input from you. Having recently undertaken an initiative to upgrade and enhance my personal technology setup, I knew I could do better.</p><h2 id="my-overall--requirements">My Overall Requirements</h2><ol><li>Multiple copies of my data to survive hardware/software failure.</li><li>Live data synchronization between my MacBook and new Linux Workstation.</li><li>Snapshots available for restore.</li><li>Remote copies of my data.</li></ol><h2 id="the-guiding-principle---321">The Guiding Principle - 3,2,1</h2><p>This is something that is obvious, but it really is the bare minimum, even for your personal data. The <a href="https://us-cert.cisa.gov/sites/default/files/publications/data_backup_options.pdf">3,2,1 rule</a> states that you need:</p><ul><li><strong>3 backups</strong>: 3 total copies of your data.</li><li><strong>2 local</strong>: 2 locally available copies.</li><li><strong>1 remote</strong>: 1 off-site copy.</li></ul><p>If you satisfy these requirements, your chance of data loss is incredibly slim.</p><h2 id="local-first">Local First</h2><p>There are many fancy approaches to create local, automatic, backup systems. Fundamentally, they lean on having a dedicated device, on-prem, holding your data. These options included:</p><ul><li>Purpose-built Network Attached Storage with multiple storage bays</li><li>Raspberry Pi with added hardware</li><li>Full Data Server</li></ul><p>For my needs, these were a little overkill. I wasn’t planning on using my backup as a streaming source or personal media server. I just really needed my data to be synchronized between my Macbook and my Linux Workstation. Surely there must be a simple solution for this? Luckily for me, I found <a href="https://syncthing.net/">Syncthing</a>. I am very satisfied with the operational simplicity of this tool. I can just point the app to my data folder on each device, and it does the rest. The included ignore pattern functionality is also very useful in reducing the synchronization data volume amount. The nice effect of live synchronization is that the data changes are immediately reflected on the other machine.</p><p>However, even though live synchronization maintains two copies of my data it is <strong>not</strong> a replacement for true backups! What if the data became corrupted on one device? The daemon would sync this corruption to the other device and I would lose content! This is what <strong>versioned backups</strong> prevent by creating snapshots of your data at certain points in time. Because my use case is simple, I am delegating versioned backups to the remote backup element.</p><h2 id="remote-backups">Remote Backups</h2><p>With a live synchronization system working locally, I set out to add a remote backup portion to the setup. My personal stuff is not mission-critical. Maybe yours is, but mine isn’t, so a remote backup frequency of once per day was enough. Anyways, I settled on the following requirements:</p><ol><li><strong>Inexpensive</strong>: I don’t want to break the bank.</li><li><strong>Encrypted</strong>: I’m not a privacy nut, but something still feels wrong about giving someone else carte blanche access to my data.</li><li><strong>Scheduled</strong>: I would like this backup to run once a day.</li><li><strong>Open-Source</strong>: This is important for two reasons: I don’t want to be locked-in and I want to be sure the app does what it says it does.</li></ol><p>To make a long story short; I ended up using <a href="https://en.wikipedia.org/wiki/Anacron">anacron</a> and <a href="http://duplicity.nongnu.org/">duplicity</a> with <a href="https://www.backblaze.com/b2/cloud-storage.html">Backblaze B2</a> on my Linux Workstation.</p><p><strong>Anacron</strong> allows task scheduling for devices that are not always on. So if you schedule something to run once a day, as long as your computer is on for a portion of the day; it will run.</p><p><strong>Duplicity</strong> is an amazing all-in-one encryption and upload command-line backup tool. It supports full and partial backups along with support for most cloud providers. I set it up to delete the partial incremental backups after 30 days and do a full backup to save space in the long run.</p><p><strong>Backblaze B2</strong> is an solid, inexpensive online storage provider. It provided all the features I needed and is compatible with duplicity out of the box.</p><p>The following is templated copy of my backup script. Please note the <strong>firefox profile backup</strong> and the use of <strong>systemd-inhibit</strong> to prevent shutting down the computer while the backup is in progress:</p><pre><code class="language-bash"># Sync firefox profile into data folder
rsync -a {{FIRFOX_FOLDER}} {{DATA_FOLDER}}

# Push latest changes to cloud
systemd-inhibit --why=&quot;Daily Backup In-Progress&quot; duplicity \
    --verbosity 8 \
    {{DATA_FOLDER}} \
    {{CLOUD_ENPOINT_AND_API_KEY}} \
    --asynchronous-upload \
    --full-if-older-than 1M \
    --allow-source-mismatch \
    &gt;&gt; {{LOG_FILE}}
    
echo &quot;personal backup complete ($(date))&quot; &gt;&gt; {{LOG_FILE}}
</code></pre><h2 id="epilogue">Epilogue</h2><p>Since setting up this system, not a single part of has failed. And maybe, it never will. But I am no longer embarrassed of my backup system and I sleep a little better at night. Please take this as a reminder to back your important stuff up. Hopefully you’ll never have to thank me!</p></div><div id="author-bio"></div><nav id="post-navigation"><a href="https://tech.davidgorski.ca/concise-result-extraction-in-modern-c.html" rel="prev">&larr; Previous (Concise Result Extraction in Modern C++) </a><a href="https://tech.davidgorski.ca/using-c17-to-create-composable-recursive-data-types.html" rel="next">Next (Using C++17 to Create Composable, Recursive Data Types) &rarr;</a></nav><div id="related-posts"><h3>Author:</h3><div><section><h4><a href="https://tech.davidgorski.ca/using-c17-to-create-composable-recursive-data-types.html">Using C++17 to Create Composable, Recursive Data Types</a></h4><p></p></section></div></div></div></main><footer></footer><script async src="https://tech.davidgorski.ca/assets/js/scripts.js?v=3733efd39cd6c799b95c8fcb96993840"></script></body></html>